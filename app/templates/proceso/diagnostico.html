{% extends "index.html" %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOGUS - {{ Proceso }}</title>
    {% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tarjeta.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    {% endblock %}
</head>

<body>
    {% block banner_section %}{% endblock %} 
    {% block help_section %}{% endblock %}
    {% block diagram_section %}{% endblock %}
    {% block content %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% if Proceso|lower == 'parques_urbanos' %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% elif Proceso|lower == 'corredores_ecologicos' %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagn√≥stico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ‚úÖ", "contenido": "Evaluaci√≥n detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ‚ö†Ô∏è", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ‚ùå", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gr√°ficos para Gesti√≥n Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gesti√≥n H√≠drica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estad√≠sticas de √°reas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Econ√≥mica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauraci√≥n Ecol√≥gica", "contenido": "Recuperaci√≥n de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participaci√≥n Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% else %}
        <p>No hay Excel disponible para este proceso. Valor recibido: {{ Proceso }}</p>
    {% endif %}
    <div class="container explanation-and-charts mt-5">
        <h2 class="module-title mb-4">Visualizaci√≥n y An√°lisis de Datos</h2>
        
        <div class="charts-with-explanations">
            <!-- Gr√°fico 1: Porcentaje de Indicador por Fase -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de Barras ‚Äì Porcentaje del Indicador por Fase üìä</h3>
                            <div class="card-content">
                                <p>Permite comparar el porcentaje de cumplimiento del indicador en cada fase del proyecto.</p>
                                <p>La <strong>Distribuci√≥n de Viabilidad</strong> refleja el balance entre proyectos viables, medianamente viables y no viables, permitiendo identificar √°reas que requieren atenci√≥n prioritaria.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Porcentaje de Indicador por Fase</h5>
                            <canvas id="graficoIndicador"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gr√°fico 2: Comparaci√≥n de √Årea Verde vs √Årea Total -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-leaf"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de Barras Apiladas ‚Äì Comparaci√≥n de √Årea Verde vs √Årea Total üìè</h3>
                            <div class="card-content">
                                <p>El gr√°fico de <strong>Relaci√≥n √Årea Verde vs √Årea Total</strong> presenta la proporci√≥n de espacios verdes en cada fase del proyecto urbano. Un equilibrio adecuado mejora la calidad ambiental, reduce islas de calor y promueve la biodiversidad urbana.</p>
                                <p>Se recomienda mantener un m√≠nimo del 30% de √°reas verdes seg√∫n est√°ndares internacionales de urbanismo sostenible.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Comparaci√≥n de √Årea Verde vs √Årea Total por Fase</h5>
                            <canvas id="graficoArea"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gr√°fico 3: Relaci√≥n entre √Årea Verde y Porcentaje del Indicador -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de Dispersi√≥n ‚Äì Relaci√≥n entre √Årea Verde y Porcentaje del Indicador üéØ</h3>
                            <div class="card-content">
                                <p>Visualiza la correlaci√≥n entre el tama√±o de √°reas verdes y el cumplimiento de indicadores de sostenibilidad, mostrando patrones de relaci√≥n entre estas variables.</p>
                                <p>Permite identificar si existe una tendencia positiva donde mayores √°reas verdes se asocian con mejores indicadores de sostenibilidad urbana.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Relaci√≥n entre √Årea Verde y Porcentaje del Indicador</h5>
                            <canvas id="graficoDispersion"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gr√°fico 4: Evoluci√≥n del Indicador a lo Largo de las Fases -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de L√≠neas ‚Äì Evoluci√≥n del Indicador a lo Largo de las Fases üìà</h3>
                            <div class="card-content">
                                <p>Muestra la progresi√≥n temporal de los indicadores de sostenibilidad a trav√©s de las diferentes fases del proyecto urbano.</p>
                                <p>Facilita el an√°lisis de tendencias, permitiendo identificar mejoras o deterioros en la sostenibilidad a lo largo del tiempo del desarrollo.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Evoluci√≥n del Indicador a lo Largo de las Fases</h5>
                            <canvas id="graficoLineas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gr√°fico 5: Distribuci√≥n de la Viabilidad de las Fases (Donut) -->
            <div class="chart-explanation-pair">
                <div class="row g-4 align-items-center">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de Donut ‚Äì Distribuci√≥n de la Viabilidad de las Fases üç©</h3>
                            <div class="card-content">
                                <p>Representa visualmente la proporci√≥n de fases categorizadas como viables, medianamente viables y no viables dentro del proyecto.</p>
                                <p>Proporciona una visi√≥n general r√°pida del estado de viabilidad del proyecto, facilitando la toma de decisiones sobre √°reas que requieren intervenci√≥n.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Distribuci√≥n de la Viabilidad de las Fases</h5>
                            <div style="height: 300px; position: relative;">
                                <canvas id="graficoPie"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gr√°fico 6: Indicador de Sostenibilidad por Fase (Radar) -->
            <div class="chart-explanation-pair">
                <div class="row g-4 align-items-center">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-spider"></i>
                            </div>
                            <h3 class="card-title">Gr√°fico de Radar ‚Äì Indicador de Sostenibilidad por Fase üï∏Ô∏è</h3>
                            <div class="card-content">
                                <p>Visualiza m√∫ltiples dimensiones de sostenibilidad simult√°neamente, permitiendo comparar el rendimiento de diferentes fases en varios indicadores.</p>
                                <p>Ideal para identificar fortalezas y debilidades espec√≠ficas en cada fase del proyecto urbano sostenible.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Indicador de Sostenibilidad por Fase</h5>
                            <div style="height: 300px; position: relative;">
                                <canvas id="graficoRadar"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Navegaci√≥n fija -->
        <div class="module-navigation">
            <button class="nav-button" id="navToTabla" title="Ir a Tabla"><i class="fas fa-table"></i></button>
            <button class="nav-button" id="navToDiagnostico" title="Ir a Diagn√≥stico"><i class="fas fa-chart-pie"></i></button>
            <button class="nav-button" id="navToResultados" title="Ir a Resultados"><i class="fa-solid fa-chart-column" style="color: #fafafa;"></i></button>
        </div>
    </div>
    {% endblock %}
    
    {% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/proceso.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const nombresFases = [{% for fase in fases %}"{{ fase.nombre_fase }}",{% endfor %}];
            const porcentajeIndicador = [{% for fase in fases %}{{ fase.porcentaje_indicador }},{% endfor %}];
            const areasVerdes = [{% for fase in fases %}{{ fase.area_verde }},{% endfor %}];
            const areasTotal = [{% for fase in fases %}{{ fase.area_total }},{% endfor %}];
            const viabilidad = [{% for fase in fases %}"{{ fase.viabilidad }}",{% endfor %}];
            
            const conteoViable = viabilidad.filter(v => v.includes("Viable ‚úÖ")).length;
            const conteoMediano = viabilidad.filter(v => v.includes("Medianamente viable ‚ö†Ô∏è")).length;
            const conteoNoViable = viabilidad.filter(v => v.includes("No viable ‚ùå")).length;
            
            // 1. Gr√°fico de Barras mejorado
            new Chart(document.getElementById('graficoIndicador'), {
                type: 'bar',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Porcentaje de Indicador',
                        data: porcentajeIndicador,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        datalabels: {
                            display: true,
                            anchor: 'end',
                            align: 'top',
                            formatter: (value) => `${value}%`
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        
            // Para el gr√°fico de donut (pie)
            new Chart(document.getElementById('graficoPie'), {
                type: 'doughnut',
                data: {
                    labels: ['Viable', 'Medianamente viable', 'No viable'],
                    datasets: [{
                        data: [conteoViable, conteoMediano, conteoNoViable],
                        backgroundColor: ['rgba(75, 192, 75, 0.7)', 'rgba(255, 206, 86, 0.7)', 'rgba(255, 99, 132, 0.7)']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,  // Esto es importante para controlar la altura
                    plugins: {
                        legend: {
                            position: 'bottom'   // Coloca la leyenda abajo para ahorrar espacio vertical
                        }
                    }
                }
            });
            // 3. Gr√°fico de Barras Apiladas (√Årea Verde vs √Årea Total)
            new Chart(document.getElementById('graficoArea'), {
                type: 'bar',
                data: {
                    labels: nombresFases,
                    datasets: [
                        { label: '√Årea Verde (m¬≤)', data: areasVerdes, backgroundColor: 'rgba(75, 192, 75, 0.6)' },
                        { label: '√Årea Total (m¬≤)', data: areasTotal, backgroundColor: 'rgba(54, 162, 235, 0.6)' }
                    ]
                },
                options: { 
                    responsive: true, 
                    scales: { x: { stacked: true }, y: { stacked: true } }
                }
            });
        
            // Para el gr√°fico de radar
            new Chart(document.getElementById('graficoRadar'), {
                type: 'radar',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Indicador de Sostenibilidad',
                        data: porcentajeIndicador,
                        backgroundColor: 'rgba(153, 102, 255, 0.6)',
                        borderColor: 'rgba(153, 102, 255, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,  // Esto es importante para controlar la altura
                    plugins: {
                        legend: {
                            position: 'bottom'   // Coloca la leyenda abajo para ahorrar espacio vertical
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        
            // 5. Gr√°fico de Dispersi√≥n (√Årea Verde vs Indicador)
            new Chart(document.getElementById('graficoDispersion'), {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '√Årea Verde vs. Indicador',
                        data: nombresFases.map((_, i) => ({ x: areasVerdes[i], y: porcentajeIndicador[i] })),
                        backgroundColor: 'rgba(255, 99, 132, 0.7)'
                    }]
                },
                options: {
                    scales: {
                        x: { title: { display: true, text: '√Årea Verde (m¬≤)' } },
                        y: { title: { display: true, text: 'Porcentaje de Indicador (%)' } }
                    }
                }
            });
            // 6. Gr√°fico de L√≠neas (Evoluci√≥n del Indicador a lo Largo de las Fases)
            new Chart(document.getElementById('graficoLineas'), {
                type: 'line',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Evoluci√≥n del Indicador (%)',
                        data: porcentajeIndicador,
                        borderColor: 'rgba(255, 159, 64, 1)',
                        backgroundColor: 'rgba(255, 159, 64, 0.2)',
                        borderWidth: 2,
                        tension: 0.3, // Suaviza la l√≠nea
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        });
        


    </script>
    {% endblock %}
</body>
</html>

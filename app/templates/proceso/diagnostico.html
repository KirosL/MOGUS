{% extends "index.html" %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOGUS - {{ Proceso }}</title>
    {% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tarjeta.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    {% endblock %}
</head>

<body>
    {% block banner_section %}{% endblock %} 
    {% block help_section %}{% endblock %}
    {% block diagram_section %}{% endblock %}
    {% block content %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% if Proceso|lower == 'parques_urbanos' %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% elif Proceso|lower == 'corredores_ecologicos' %}
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title first">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    <div class="module-section" id="diagnosticoModule">
        <div class="container">
            <h2 class="module-title">Diagnóstico</h2>
            <div class="cards-container">
                {% for tarjeta in [
                    {"imagen": "BOCETO 2.1.jpg", "titulo": "Viable ✅", "contenido": "Evaluación detallada de especies y ecosistemas."},
                    {"imagen": "BOCETO 1.3.jpg", "titulo": "Medianamente viable ⚠️", "contenido": "Impacto en el microclima urbano."},
                    {"imagen": "BOCETO 1.2.jpg", "titulo": "No viable ❌", "contenido": "Beneficio comunitario y accesibilidad."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <img class="tarjeta-imagen" src="{{ url_for('static', filename='img/' ~ tarjeta.imagen) }}" alt="{{ tarjeta.titulo }}">
                    </div>
                    <h3 class="card-title">{{ tarjeta.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ tarjeta.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Tarjetas extras
            <h2 class="module-title">Tipos de Gráficos para Gestión Urbana Sostenible</h2>
            <div class="cards-container">
                {% for grafico in [
                    {"icono": "water", "titulo": "Gestión Hídrica", "contenido": "Manejo sostenible del agua pluvial."},
                    {"icono": "tree", "titulo": "Cobertura Vegetal", "contenido": "Estadísticas de áreas verdes."},
                    {"icono": "coins", "titulo": "Viabilidad Económica", "contenido": "Costos de mantenimiento."},
                    {"icono": "seedling", "titulo": "Restauración Ecológica", "contenido": "Recuperación de ecosistemas."},
                    {"icono": "hands-helping", "titulo": "Participación Comunitaria", "contenido": "Involucramiento ciudadano."},
                    {"icono": "balance-scale", "titulo": "Cumplimiento Normativo", "contenido": "Normativas ambientales y urbanas."}
                ] %}
                <div class="diagnostico-card">
                    <div class="card-icon">
                        <i class="fas fa-{{ grafico.icono }}"></i>
                    </div>
                    <h3 class="card-title">{{ grafico.titulo }}</h3>
                    <div class="card-content">
                        <p>{{ grafico.contenido }}</p>
                    </div>
                </div>
                {% endfor %}
            </div> -->
    </div>
    {% else %}
        <p>No hay Excel disponible para este proceso. Valor recibido: {{ Proceso }}</p>
    {% endif %}
    <div class="container explanation-and-charts mt-5">
        <h2 class="module-title mb-4">Visualización y Análisis de Datos</h2>
        
        <div class="charts-with-explanations">
            <!-- Gráfico 1: Porcentaje de Indicador por Fase -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Barras – Porcentaje del Indicador por Fase 📊</h3>
                            <div class="card-content">
                                <p>Permite comparar el porcentaje de cumplimiento del indicador en cada fase del proyecto.</p>
                                <p>La <strong>Distribución de Viabilidad</strong> refleja el balance entre proyectos viables, medianamente viables y no viables, permitiendo identificar áreas que requieren atención prioritaria.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Porcentaje de Indicador por Fase</h5>
                            <canvas id="graficoIndicador"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gráfico 2: Comparación de Área Verde vs Área Total -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-leaf"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Barras Apiladas – Comparación de Área Verde vs Área Total 📏</h3>
                            <div class="card-content">
                                <p>El gráfico de <strong>Relación Área Verde vs Área Total</strong> presenta la proporción de espacios verdes en cada fase del proyecto urbano. Un equilibrio adecuado mejora la calidad ambiental, reduce islas de calor y promueve la biodiversidad urbana.</p>
                                <p>Se recomienda mantener un mínimo del 30% de áreas verdes según estándares internacionales de urbanismo sostenible.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Comparación de Área Verde vs Área Total por Fase</h5>
                            <canvas id="graficoArea"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gráfico 3: Relación entre Área Verde y Porcentaje del Indicador -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Dispersión – Relación entre Área Verde y Porcentaje del Indicador 🎯</h3>
                            <div class="card-content">
                                <p>Visualiza la correlación entre el tamaño de áreas verdes y el cumplimiento de indicadores de sostenibilidad, mostrando patrones de relación entre estas variables.</p>
                                <p>Permite identificar si existe una tendencia positiva donde mayores áreas verdes se asocian con mejores indicadores de sostenibilidad urbana.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Relación entre Área Verde y Porcentaje del Indicador</h5>
                            <canvas id="graficoDispersion"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gráfico 4: Evolución del Indicador a lo Largo de las Fases -->
            <div class="chart-explanation-pair">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Líneas – Evolución del Indicador a lo Largo de las Fases 📈</h3>
                            <div class="card-content">
                                <p>Muestra la progresión temporal de los indicadores de sostenibilidad a través de las diferentes fases del proyecto urbano.</p>
                                <p>Facilita el análisis de tendencias, permitiendo identificar mejoras o deterioros en la sostenibilidad a lo largo del tiempo del desarrollo.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Evolución del Indicador a lo Largo de las Fases</h5>
                            <canvas id="graficoLineas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Gráfico 5: Distribución de la Viabilidad de las Fases (Donut) -->
            <div class="chart-explanation-pair">
                <div class="row g-4 align-items-center">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Donut – Distribución de la Viabilidad de las Fases 🍩</h3>
                            <div class="card-content">
                                <p>Representa visualmente la proporción de fases categorizadas como viables, medianamente viables y no viables dentro del proyecto.</p>
                                <p>Proporciona una visión general rápida del estado de viabilidad del proyecto, facilitando la toma de decisiones sobre áreas que requieren intervención.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Distribución de la Viabilidad de las Fases</h5>
                            <div style="height: 300px; position: relative;">
                                <canvas id="graficoPie"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gráfico 6: Indicador de Sostenibilidad por Fase (Radar) -->
            <div class="chart-explanation-pair">
                <div class="row g-4 align-items-center">
                    <div class="col-lg-6">
                        <div class="diagnostico-card explanation-card">
                            <div class="card-icon">
                                <i class="fas fa-spider"></i>
                            </div>
                            <h3 class="card-title">Gráfico de Radar – Indicador de Sostenibilidad por Fase 🕸️</h3>
                            <div class="card-content">
                                <p>Visualiza múltiples dimensiones de sostenibilidad simultáneamente, permitiendo comparar el rendimiento de diferentes fases en varios indicadores.</p>
                                <p>Ideal para identificar fortalezas y debilidades específicas en cada fase del proyecto urbano sostenible.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3 shadow-sm chart-card">
                            <h5>Indicador de Sostenibilidad por Fase</h5>
                            <div style="height: 300px; position: relative;">
                                <canvas id="graficoRadar"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Navegación fija -->
        <div class="module-navigation">
            <button class="nav-button" id="navToTabla" title="Ir a Tabla"><i class="fas fa-table"></i></button>
            <button class="nav-button" id="navToDiagnostico" title="Ir a Diagnóstico"><i class="fas fa-chart-pie"></i></button>
            <button class="nav-button" id="navToResultados" title="Ir a Resultados"><i class="fa-solid fa-chart-column" style="color: #fafafa;"></i></button>
        </div>
    </div>
    {% endblock %}
    
    {% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/proceso.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const nombresFases = [{% for fase in fases %}"{{ fase.nombre_fase }}",{% endfor %}];
            const porcentajeIndicador = [{% for fase in fases %}{{ fase.porcentaje_indicador }},{% endfor %}];
            const areasVerdes = [{% for fase in fases %}{{ fase.area_verde }},{% endfor %}];
            const areasTotal = [{% for fase in fases %}{{ fase.area_total }},{% endfor %}];
            const viabilidad = [{% for fase in fases %}"{{ fase.viabilidad }}",{% endfor %}];
            
            const conteoViable = viabilidad.filter(v => v.includes("Viable ✅")).length;
            const conteoMediano = viabilidad.filter(v => v.includes("Medianamente viable ⚠️")).length;
            const conteoNoViable = viabilidad.filter(v => v.includes("No viable ❌")).length;
            
            // 1. Gráfico de Barras mejorado
            new Chart(document.getElementById('graficoIndicador'), {
                type: 'bar',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Porcentaje de Indicador',
                        data: porcentajeIndicador,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        datalabels: {
                            display: true,
                            anchor: 'end',
                            align: 'top',
                            formatter: (value) => `${value}%`
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        
            // Para el gráfico de donut (pie)
            new Chart(document.getElementById('graficoPie'), {
                type: 'doughnut',
                data: {
                    labels: ['Viable', 'Medianamente viable', 'No viable'],
                    datasets: [{
                        data: [conteoViable, conteoMediano, conteoNoViable],
                        backgroundColor: ['rgba(75, 192, 75, 0.7)', 'rgba(255, 206, 86, 0.7)', 'rgba(255, 99, 132, 0.7)']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,  // Esto es importante para controlar la altura
                    plugins: {
                        legend: {
                            position: 'bottom'   // Coloca la leyenda abajo para ahorrar espacio vertical
                        }
                    }
                }
            });
            // 3. Gráfico de Barras Apiladas (Área Verde vs Área Total)
            new Chart(document.getElementById('graficoArea'), {
                type: 'bar',
                data: {
                    labels: nombresFases,
                    datasets: [
                        { label: 'Área Verde (m²)', data: areasVerdes, backgroundColor: 'rgba(75, 192, 75, 0.6)' },
                        { label: 'Área Total (m²)', data: areasTotal, backgroundColor: 'rgba(54, 162, 235, 0.6)' }
                    ]
                },
                options: { 
                    responsive: true, 
                    scales: { x: { stacked: true }, y: { stacked: true } }
                }
            });
        
            // Para el gráfico de radar
            new Chart(document.getElementById('graficoRadar'), {
                type: 'radar',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Indicador de Sostenibilidad',
                        data: porcentajeIndicador,
                        backgroundColor: 'rgba(153, 102, 255, 0.6)',
                        borderColor: 'rgba(153, 102, 255, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,  // Esto es importante para controlar la altura
                    plugins: {
                        legend: {
                            position: 'bottom'   // Coloca la leyenda abajo para ahorrar espacio vertical
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        
            // 5. Gráfico de Dispersión (Área Verde vs Indicador)
            new Chart(document.getElementById('graficoDispersion'), {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Área Verde vs. Indicador',
                        data: nombresFases.map((_, i) => ({ x: areasVerdes[i], y: porcentajeIndicador[i] })),
                        backgroundColor: 'rgba(255, 99, 132, 0.7)'
                    }]
                },
                options: {
                    scales: {
                        x: { title: { display: true, text: 'Área Verde (m²)' } },
                        y: { title: { display: true, text: 'Porcentaje de Indicador (%)' } }
                    }
                }
            });
            // 6. Gráfico de Líneas (Evolución del Indicador a lo Largo de las Fases)
            new Chart(document.getElementById('graficoLineas'), {
                type: 'line',
                data: {
                    labels: nombresFases,
                    datasets: [{
                        label: 'Evolución del Indicador (%)',
                        data: porcentajeIndicador,
                        borderColor: 'rgba(255, 159, 64, 1)',
                        backgroundColor: 'rgba(255, 159, 64, 0.2)',
                        borderWidth: 2,
                        tension: 0.3, // Suaviza la línea
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        });
        


    </script>
    {% endblock %}
</body>
</html>
